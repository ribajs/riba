!function(){var e={37:function(){(()=>{if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}e.prototype=window.Event.prototype,window.CustomEvent=e})()},774:function(e,t,r){r(919);e.exports=function(e){var t="";return t+='<div class="container-fluid py-5 my-5 text-center"><div class="row"><div class="col-12"><h1 ssr-rv-html="title"></h1></div></div><section class="row"><div class="col-12"><p ssr-rv-html="content"></p></div></section><rv-logger ssr-rv-log-me="content"></rv-logger><rv-logger ssr-rv-log-me="obj | json"></rv-logger></div>'}},798:function(e,t,r){r(919);e.exports=function(e){var t="";return t+='<div class="container container-md py-5 my-5 text-center"><div class="row"><div class="col-12"><h1 ssr-rv-template="title"></h1></div></div><section class="row"><div class="col-12"><div ssr-rv-template="content"></div></div></section></div>'}},919:function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty;function i(e,t){return Array.isArray(e)?function(e,t){for(var r,n="",s="",o=Array.isArray(t),a=0;a<e.length;a++)(r=i(e[a]))&&(o&&t[a]&&(r=c(r)),n=n+s+r,s=" ");return n}(e,t):e&&"object"==typeof e?function(e){var t="",r="";for(var i in e)i&&e[i]&&n.call(e,i)&&(t=t+r+i,r=" ");return t}(e):e||""}function s(e){if(!e)return"";if("object"==typeof e){var t="";for(var r in e)n.call(e,r)&&(t=t+r+":"+e[r]+";");return t}return e+""}function o(e,t,r,n){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(n?e:e+'="'+e+'"');var i=typeof t;return"object"!==i&&"function"!==i||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),r||-1===t.indexOf('"'))?(r&&(t=c(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,r){if(1===arguments.length){for(var n=t[0],i=1;i<t.length;i++)n=e(n,t[i]);return n}for(var o in r)if("class"===o){var a=t[o]||[];t[o]=(Array.isArray(a)?a:[a]).concat(r[o]||[])}else if("style"===o){a=(a=s(t[o]))&&";"!==a[a.length-1]?a+";":a;var c=s(r[o]);c=c&&";"!==c[c.length-1]?c+";":c,t[o]=a+c}else t[o]=r[o];return t},t.classes=i,t.style=s,t.attr=o,t.attrs=function(e,t){var r="";for(var a in e)if(n.call(e,a)){var c=e[a];if("class"===a){c=i(c),r=o(a,c,!1,t)+r;continue}"style"===a&&(c=s(c)),r+=o(a,c,!1,t)}return r};var a=/["&<>]/;function c(e){var t=""+e,r=a.exec(t);if(!r)return e;var n,i,s,o="";for(n=r.index,i=0;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}i!==n&&(o+=t.substring(i,n)),i=n+1,o+=s}return i!==n?o+t.substring(i,n):o}t.escape=c,t.rethrow=function e(t,n,i,s){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&n||s))throw t.message+=" on line "+i,t;var o,a,c,l;try{s=s||r(680).readFileSync(n,{encoding:"utf8"}),o=3,a=s.split("\n"),c=Math.max(i-o,0),l=Math.min(a.length,i+o)}catch(r){return t.message+=" - could not read from "+n+" ("+r.message+")",void e(t,null,i)}o=a.slice(c,l).map((function(e,t){var r=t+c+1;return(r==i?"  > ":"    ")+r+"| "+e})).join("\n"),t.path=n;try{t.message=(n||"Pug")+":"+i+"\n"+o+"\n\n"+t.message}catch(e){}throw t}},680:function(){}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};r.r(e),r.d(e,{csrBinder:function(){return f}});var t={};r.r(t),r.d(t,{AdapterService:function(){return T},BindersDeprecatedService:function(){return j},BindersService:function(){return F},ComponentService:function(){return V},CoreService:function(){return $},FormatterService:function(){return R},HttpService:function(){return I},LifecycleService:function(){return M}});var n={};r.r(n),r.d(n,{dotAdapter:function(){return H}});var i={};r.r(i),r.d(i,{addClassBinder:function(){return pe}});var s={};r.r(s),r.d(s,{animateStarBinder:function(){return me},assignBinder:function(){return fe},assignPropertyBinder:function(){return be},attributeBinder:function(){return je},blockBinder:function(){return ve},checkedBinder:function(){return ge},classStarBinder:function(){return ye},componentAttributeBinder:function(){return we},disabledBinder:function(){return Ce},eachStarBinder:function(){return Ue},enabledBinder:function(){return Oe},flexSortChildsBinder:function(){return Ne},hideBinder:function(){return qe},htmlBinder:function(){return He},ifBinder:function(){return Ie},maxlengthBinder:function(){return De},notDraggableBinder:function(){return _e},onEventBinder:function(){return Pe},parentBinder:function(){return Be},readonlyBinder:function(){return xe},removeClassBinder:function(){return Se},showBinder:function(){return We},srcsetSizeBinder:function(){return ze},styleBackgroundImageBinder:function(){return Je},styleBinder:function(){return Ee},styleStarBinder:function(){return Ae},tagStarBinder:function(){return ke},templateBinder:function(){return Qe},textBinder:function(){return Ge},toggleOnEventBinder:function(){return Ye},unlessBinder:function(){return Xe},valueBinder:function(){return Ze}});var o={};r.r(o),r.d(o,{VideoComponent:function(){return nt}});var a={};r.r(a),r.d(a,{andFormatter:function(){return bt},appendFormatter:function(){return Jt},argsFormatter:function(){return Lt},betweenFormatter:function(){return vt},booleanFormatter:function(){return vr},callFormatter:function(){return It},callNameFormatter:function(){return Ut},capitalizeFormatter:function(){return Gt},containsFormatter:function(){return it},cutFormatter:function(){return Yt},debugFormatter:function(){return $t},defaultFormatter:function(){return Mt},digitsFormatter:function(){return Ft},dividedByFormatter:function(){return Pt},downcaseFormatter:function(){return Qt},egtFormatter:function(){return gt},eltFormatter:function(){return kt},emptyFormatter:function(){return ot},endsWithFormatter:function(){return Xt},eqFormatter:function(){return yt},evenFormatter:function(){return Tt},filledFormatter:function(){return Kt},firstFormatter:function(){return ct},gcdFormatter:function(){return St},getFormatter:function(){return at},gtFormatter:function(){return wt},handleizeFormatter:function(){return Zt},isArrayFormatter:function(){return gr},isBooleanFormatter:function(){return yr},isDefinedFormatter:function(){return wr},isDesktopFormatter:function(){return Vt},isIntegerFormatter:function(){return or},isLastFormatter:function(){return lt},isMobileFormatter:function(){return Rt},isNumberFormatter:function(){return Ar},isObjectFormatter:function(){return Er},isStringFormatter:function(){return kr},isUndefinedFormatter:function(){return Or},joinFormatter:function(){return ft},jsonFormatter:function(){return Te},lastFormatter:function(){return dt},ltFormatter:function(){return Et},mapFormatter:function(){return Ht},matchFormatter:function(){return er},minusFormatter:function(){return Dt},moduloFormatter:function(){return Bt},neFormatter:function(){return At},notFormatter:function(){return Nt},numberFormatFormatter:function(){return ar},orFormatter:function(){return Ot},osFormatter:function(){return qt},overlapsFormatter:function(){return mt},padEndFormatter:function(){return rr},padStartFormatter:function(){return tr},parseFormatter:function(){return Nr},pluralizeFormatter:function(){return cr},plusFormatter:function(){return Ct},preferFormatter:function(){return Wt},prependFormatter:function(){return lr},randomFormatter:function(){return ht},rangeFormatter:function(){return ut},replaceFirstFormatter:function(){return ur},replaceFormatter:function(){return hr},setFormatter:function(){return pt},sizeFormatter:function(){return st},sliceFormatter:function(){return pr},startsWithFormatter:function(){return mr},stripFormatter:function(){return fr},stripHtmlFormatter:function(){return br},ternaryFormatter:function(){return zt},timesFormatter:function(){return _t},toDecimalFormatter:function(){return sr},toFloatFormatter:function(){return ir},toIntegerFormatter:function(){return nr},toNumberFormatter:function(){return Dr},toStringFormatter:function(){return Cr},unevenFormatter:function(){return jt},upcaseFormatter:function(){return dr}});var c={};r.r(c);var l={};r.r(l),r.d(l,{ModuleService:function(){return Br},OpenGraphService:function(){return xr}});var d={};r.r(d);var h={};r.r(h),r.d(h,{IndexPageComponent:function(){return Fr},PagesPageComponent:function(){return Mr}});var u={};r.r(u);var p={};function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.r(p);const f={name:"csr-*",routine(e,t){const r=this.args[0];e.setAttribute(`rv-${r}`,`'${JSON.stringify(t)}'`)}};let b;!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(b||(b={}));r(37);const v=e=>!(!e||"string"!=typeof e)&&("{"===(e=e.trim()).charAt(0)||"["===e.charAt(0)),g=e=>{if(!e||!v(e))return!1;try{const t=JSON.parse(e);return!(!Array.isArray(t)&&"object"!=typeof t)}catch(e){return!1}},y=e=>{let t=null;if(!v(e))return t;if(g(e))t=JSON.parse(e)||null;else try{t=JSON.parse(e.replace(/'/g,'"'))||null}catch(e){console.warn(e)}return t},w=e=>void 0===e,A=e=>!w(e),E=e=>A(e)&&"object"==typeof e&&null!==e,k=e=>null!=e&&e.toString?e.toString():void 0,O=(Array.isArray,e=>!isNaN(parseFloat(e))&&!isNaN(e-0)),N=e=>"string"==typeof e,C=e=>{if("number"==typeof e)return e;const t=e.replace(/[^-\d.]/g,"");return O(t)?Number(t):0},D=e=>e.replace(/-([a-z0-9])/g,(e=>e[1].toUpperCase())),_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=r=>{for(const n in r)r.hasOwnProperty(n)&&(e.deep&&"[object Object]"===Object.prototype.toString.call(r[n])?t[n]=_(e,t[n],r[n]):e.keepValues?void 0===t[n]&&(t[n]=r[n]):e.onlyDefined?void 0!==r[n]&&(t[n]=r[n]):e.mergeArrays&&Array.isArray(t[n])&&Array.isArray(r[n])?t[n]=[...t[n],...r[n]]:t[n]=r[n])};for(let e=0;e<(arguments.length<=2?0:arguments.length-2);e++)r(e+2<2||arguments.length<=e+2?void 0:arguments[e+2]);return t};class P{constructor(e){this.elements=e}regists(e){if(!E(e))throw new Error("Elements to register must be an object of elements");for(const t in e)if(e[t]&&"__esModule"!==t){const r=e[t];this.regist(r,t)}return this.elements}}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class S{static updateOptions(e){if(!e.adapters)throw new Error("adapters are required!");if(e.adapters&&(S.adapters=x(x({},S.adapters),e.adapters),S.interfaces=Object.keys(S.adapters)),S.rootInterface=e.rootInterface||S.interfaces[0],!S.rootInterface)throw new Error("rootInterface is required!")}static tokenize(e,t){const r=[];let n,i,s={i:t,path:""};for(n=0;n<e.length;n++)i=e.charAt(n),~S.interfaces.indexOf(i)?(r.push(s),s={i:i,path:""}):s.path+=i;return r.push(s),r}static get(e,t){return S.adapters[e.i].get(t,e.path)}static set(e,t,r,n){e?S.adapters[t.i].observe(r,t.path,n):S.adapters[t.i].unobserve(r,t.path,n)}constructor(e,t,r){this.keypath=t,this.callback=r,this.objectPath=[];const n=this.parse();this.key=n.key,this.tokens=n.tokens,this.obj=this.getRootObject(e),this.target=this.realize(),E(this.target)&&S.set(!0,this.key,this.target,this.callback)}parse(){let e,t;if(!S.interfaces||!S.interfaces.length)throw new Error(`[Observer] Must define at least one adapter interface. interfaces: "${JSON.stringify(S.interfaces)}" adapters: "${JSON.stringify(S.adapters)}"`);if(~S.interfaces.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):(t=S.rootInterface,e=this.keypath),this.tokens=S.tokenize(e,t),!this.tokens.length)throw new Error("[Observer] No tokens");return this.key=this.tokens.pop(),{key:this.key,tokens:this.tokens}}realize(){let e,t,r=this.obj,n=-1;for(let i=0;i<this.tokens.length;i++)t=this.tokens[i],E(r)?(void 0!==this.objectPath[i]?(e=this.objectPath[i],r!==e&&(S.set(!1,t,e,this),S.set(!0,t,r,this),this.objectPath[i]=r)):(S.set(!0,t,r,this),this.objectPath[i]=r),r=S.get(t,r)):(-1===n&&(n=i),e=this.objectPath[i],e&&S.set(!1,t,e,this));return-1!==n&&this.objectPath.splice(n),r}sync(){let e,t;const r=this.realize();r!==this.target?(E(this.target)&&S.set(!1,this.key,this.target,this.callback),E(r)&&S.set(!0,this.key,r,this.callback),e=this.value(),this.target=r,t=this.value(),(t!==e||Array.isArray(t))&&this.callback.sync()):Array.isArray(r)&&this.callback.sync()}value(){if(E(this.target))return S.get(this.key,this.target)}setValue(e){E(this.target)&&S.adapters[this.key.i].set(this.target,this.key.path,e)}unobserve(){let e,t;for(let r=0;r<this.tokens.length;r++)t=this.tokens[r],e=this.objectPath[r],e&&S.set(!1,t,e,this);E(this.target)&&S.set(!1,this.key,this.target,this.callback)}getRootObject(e){let t,r;if(!e.$parent)return e;for(t=this.tokens.length?this.tokens[0].path:this.key.path,r=e;r.$parent&&void 0===r[t];)r=r.$parent;return r}}m(S,"interfaces",[]);class T extends P{constructor(e){super(e),m(this,"type","adapter")}regist(e,t){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t||e.name:e.name||t;if(!r)throw new Error("Adapter name not found!");this.elements[r]=e;const n={adapters:this.elements};return S.updateOptions(n),this.elements}}class j extends P{constructor(e){super(e),m(this,"type","binder")}regist(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||"function"!=typeof e.routine)return console.warn(new Error("Can not regist binder!"),e),this.elements;const n=r?t||e.name:e.name||t;return n?(this.elements[n]=e,this.elements):(console.warn(new Error("Binder name not found!"),e),this.elements)}}class F extends P{constructor(e){super(e),m(this,"type","binder")}regist(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return console.warn(new Error("Can not regist binder!"),e),this.elements;const n=r?t||e.name:e.name||t;return n?(this.elements[n]=e,this.elements):(console.warn(new Error("Binder name not found!"),e),this.elements)}}class L{static getNamespaces(){return Object.keys(this.instances)}static getInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";const t=L.instances[e];return t||new this(e)}static getAllInstances(){return L.instances}static clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";const t=L.instances[e];return t.events={},t.eventsOnce={},t}static deleteInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";this.clearInstance(e),delete this.instances[e]}static clearAllInstances(){const e=this.getNamespaces();for(const t of e)this.clearInstance(t)}static deleteAllInstances(){this.clearAllInstances(),this.instances={}}get namespace(){return this._namespace}constructor(e){if(m(this,"events",{}),m(this,"eventsOnce",{}),m(this,"_namespace","anonymous"),e)return L.instances[e]||(this._namespace=e,L.instances[e]=this),L.instances[e]}once(e,t,r){this.eventsOnce[e]=this.eventsOnce[e]||[],void 0!==r?this.eventsOnce[e].push({cb:t.bind(r),orgCb:t,thisContext:r}):this.eventsOnce[e].push(t)}on(e,t,r){this.events[e]=this.events[e]||[],void 0!==r?this.events[e].push({cb:t.bind(r),orgCb:t,thisContext:r}):this.events[e].push(t)}off(e,t,r){if(void 0===e)return this.events={},void(this.eventsOnce={});if(void 0!==t)if(void 0!==r){if(e in this.events)for(const[n,i]of this.events[e].entries()){const s=i;s.orgCb===t&&s.thisContext===r&&this.events[e].splice(n,1)}if(e in this.eventsOnce)for(const[n,i]of this.eventsOnce[e].entries()){const s=i;s.orgCb===t&&s.thisContext===r&&this.eventsOnce[e].splice(n,1)}}else{if(e in this.events)for(const[r,n]of this.events[e].entries()){n===t&&this.events[e].splice(r,1)}if(e in this.eventsOnce)for(const[r,n]of this.eventsOnce[e].entries()){n===t&&this.eventsOnce[e].splice(r,1)}}else this.events[e]=[],this.eventsOnce[e]=[]}trigger(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(e in this.events)for(const t of this.events[e])null!=t&&t.cb?t.cb(...r):t(...r);if(e in this.eventsOnce)for(const[t,n]of this.eventsOnce[e].entries())null!=n&&n.cb?(n.cb(...r),this.eventsOnce[e].splice(t,1)):(n(...r),this.eventsOnce[e].splice(t,1))}}m(L,"instances",{});class ${static get options(){return this._options}constructor(){}static getSingleton(){if(this.instance)return this.instance;throw new Error("Singleton of CoreService not defined, please call setSingleton first!")}static setSingleton(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.instance)throw new Error("Singleton of CoreService already defined!");return this._options=e,this.instance=new this,this.instance}}m($,"_options",{});class M{constructor(){m(this,"events",L.getInstance("lifecycle")),m(this,"debug",!1),m(this,"routerEvents",L.getInstance()),m(this,"timeout",null),m(this,"components",{}),this.addEventListeners(),this.reset(),M.instance=this}static getInstance(){return M.instance||(M.instance=new M),M.instance}getEmpty(){return{components:[]}}addEventListeners(){this.events.on("Component:connected",(e=>{this.resetTimeout(),this.components[e.tagName]=this.components[e.tagName]||this.getEmpty(),this.components[e.tagName].components.push(e.component)})),this.events.on("Component:disconnected",(()=>{this.resetTimeout(),this.checkStates()})),this.events.on("Component:afterBind",(()=>{this.resetTimeout(),this.checkStates()})),this.events.on("Component:error",((e,t)=>{this.onError(e,t)})),this.routerEvents.on("newPageReady",((e,t,r,n,i,s,o)=>{this.debug&&console.debug("newPageReady",e,t,r,"firstPageLoad",o),o||this.reset()}))}getState(e){let t=0,r=0;for(const n of this.components[e].components)n.connected&&(t++,n.bound&&r++);return{connected:t,bound:r}}getStates(){const e={};for(const t in this.components){const r=this.getState(t);e[t]={state:r,components:this.components[t].components}}return e}checkStates(){let e=!0;const t=this.getStates();for(const r in t){const n=t[r].state;if(n.connected!==n.bound){e=!1;break}}return e&&this.onAllBound(),{states:t,allBound:e}}onAllBound(){this.clearTimeout(),this.events.trigger("ComponentLifecycle:allBound",this.components),this.debug&&console.debug("[ComponentLifecycle] All components bound!")}onError(e,t){this.clearTimeout(),console.error(`The component "${t.tagName}" has caused an error:`,e),this.events.trigger("ComponentLifecycle:error",e,t)}onTimeout(){this.clearTimeout();const e=this.getStates();if(Object.keys(e).length<=0)return void console.warn("No component found");let t="[ComponentLifecycle] Timeout! {count} component(s) takes too long!\nUnfinished components:\n",r=0;for(const n in e){const i=e[n].state;i.connected!==i.bound&&(r++,t+=`${n}: ${JSON.stringify(e[n].state,null,2)} + \n`)}t=t.replace("{count}",r.toString()),this.events.trigger("ComponentLifecycle:error",new Error(t),{})}clearTimeout(){this.timeout&&window.clearTimeout(this.timeout)}resetTimeout(){var e;return this.debug&&console.debug("[ComponentLifecycle] reset timeout.."),this.clearTimeout(),this.timeout=window.setTimeout(this.onTimeout.bind(this),(null===(e=$.options.lifecycle)||void 0===e?void 0:e.timeout)||5e3),this.timeout}reset(){this.debug&&console.debug("[ComponentLifecycle] reset!"),this.components={},this.resetTimeout()}}class V extends P{constructor(e){super(e),m(this,"type","components")}regist(e,t){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t||e.tagName:e.tagName||t;return r?(this.elements[r]=e,this.elements):(console.warn(new Error("Component name not found!"),e),this.elements)}}class R extends P{constructor(e){super(e),m(this,"type","formatter")}regist(e,t){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?t||e.name:e.name||t;if(!r)throw new Error("Formatter name not found!");return this.elements[r]=e,this.elements}}class I{static setRequestHeaderEachRequest(e,t){this._requestHeadersEachRequest.push({name:e,value:t})}static async getJSON(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.fetch(e,"GET",t,"json",r,n)}static async post(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"POST",t,r,n,i)}static async delete(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"DELETE",t,r,n,i)}static async put(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"PUT",t,r,n,i)}static async get(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.fetch(e,"GET",t,r,n,i)}static parseDataType(e){const t={};let r="application/x-www-form-urlencoded",n="*/*";switch(e){case"script":r="application/javascript";break;case"json":r="application/json",n="application/json, text/javascript";break;case"xml":r="application/xml",n="application/xml, text/xml";break;case"text":r="text/plain",n="text/plain";break;case"html":r="text/html",n="text/html";break;case"form":r="application/x-www-form-urlencoded"}return r&&(t["Content-Type"]=r,t.Accept=n),t}static async fetch(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!fetch)throw new Error("Your browser does not support the fetch API, use xhr instead or install a polyfill.");for(const e of this._requestHeadersEachRequest)s[e.name]=e.value;i&&(s=_({deep:!1},s,this.parseDataType(i))),o.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");const a=o.cache?o.cache:"default";if("GET"===r&&n){if(new URLSearchParams(n).toString()){const t=-1!==e.indexOf("?")?"&":"?";e=e+t+new URLSearchParams(n).toString()}}else n&&(t="form"===i?new URLSearchParams(n):JSON.stringify(n));const c=await fetch(e,{credentials:"same-origin",cache:a,method:r,body:t,headers:s,mode:o.mode||"cors"});let l=await c.text();if("string"==typeof l&&g(l)&&(l=JSON.parse(l)),"string"==typeof l)switch(l){case"null":l=null;break;case"true":l=!0;break;case"false":l=!1;break;case"undefined":l=void 0}return{status:c.status,headers:c.headers,ok:c.ok,redirected:c.redirected,statusText:c.statusText,type:c.type,url:c.url,arrayBuffer:c.arrayBuffer,blob:c.blob,bodyUsed:c.bodyUsed,clone:c.clone,formData:c.formData,text:c.text,body:l}}}m(I,"_requestHeadersEachRequest",[]);class U{constructor(){m(this,"name","."),m(this,"counter",0),m(this,"weakmap",{})}weakReference(e){if(!e.hasOwnProperty("__rv")){const t=this.counter++;Object.defineProperty(e,"__rv",{value:t})}return this.weakmap[e.__rv]||(this.weakmap[e.__rv]={callbacks:{}}),this.weakmap[e.__rv]}cleanupWeakReference(e,t){Object.keys(e.callbacks).length||e.pointers&&Object.keys(e.pointers).length||delete this.weakmap[t]}stubFunction(e,t){const r=e[t],n=this.weakReference(e),i=this.weakmap;e[t]=function(){for(var t=arguments.length,s=new Array(t),o=0;o<t;o++)s[o]=arguments[o];const a=r.apply(e,s);return Object.keys(n.pointers).forEach((e=>{const t=n.pointers[e];i[e]&&Array.isArray(i[e].callbacks[t])&&i[e].callbacks[t].forEach((e=>{e.sync()}))})),a}}observeMutations(e,t,r){if(Array.isArray(e)){const n=this.weakReference(e);n.pointers||(n.pointers={},U.ARRAY_METHODS.forEach((t=>{this.stubFunction(e,t)}))),n.pointers[t]||(n.pointers[t]=[]),-1===n.pointers[t].indexOf(r)&&n.pointers[t].push(r)}}unobserveMutations(e,t,r){if(Array.isArray(e)&&null!=e.__rv){const n=this.weakmap[e.__rv];if(n){const i=n.pointers[t];if(i){const s=i.indexOf(r);s>-1&&i.splice(s,1),i.length||delete n.pointers[t],this.cleanupWeakReference(n,e.__rv)}}}}observe(e,t,r){let n;const i=this.weakReference(e).callbacks;if(!i[t]){i[t]=[];const r=Object.getOwnPropertyDescriptor(e,t);r&&(r.get||r.set||!r.configurable)||(n=e[t],Object.defineProperty(e,t,{enumerable:!0,get:()=>n,set:r=>{if(r!==n){this.unobserveMutations(n,e.__rv,t),n=r;const i=this.weakmap[e.__rv];if(i){const n=i.callbacks[t];n&&n.forEach((e=>{e.sync()})),this.observeMutations(r,e.__rv,t)}}}}))}-1===i[t].indexOf(r)&&i[t].push(r),this.observeMutations(e[t],e.__rv,t)}unobserve(e,t,r){const n=this.weakmap[e.__rv];if(n){const i=n.callbacks[t];if(i){const s=i.indexOf(r);s>-1&&(i.splice(s,1),i.length||(delete n.callbacks[t],this.unobserveMutations(e[t],e.__rv,t))),this.cleanupWeakReference(n,e.__rv)}}}get(e,t){return e[t]}set(e,t,r){e[t]=r}}m(U,"ARRAY_METHODS",["push","pop","shift","unshift","sort","reverse","splice"]);const H=new U,q=e=>{const t=[];if("checkbox"===e.type)return e.checked;if("select-multiple"===e.type){const r=e.options;for(const e in r)if(r[e]){const n=r[e];n.selected&&t.push(n.value)}return t}return e.hasAttribute&&e.hasAttribute("contenteditable")?e.innerHTML:e.value},W=async e=>new Promise((t=>{let r;const n=()=>{void 0!==r&&clearTimeout(r),r=setTimeout((()=>{t()}),100)};e.removeEventListener("scroll",n),e.addEventListener("scroll",n),n()}));window.scrollToPosition=async function(e,t){let r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"smooth";if(!e)return;const o=W(e);if("vertical"===i||"both"===i)switch(t){case"start":r=0;break;case"end":if(e.document){const t=e,n=t.document;r=t.scrollMaxY||Math.max(n.body.scrollHeight,n.body.offsetHeight,n.documentElement.clientHeight,n.documentElement.scrollHeight,n.documentElement.offsetHeight)}else r=e.scrollHeight;break;default:r=t}if("horizontal"===i||"both"===i)switch(t){case"start":n=0;break;case"end":if(e.document){const t=e,r=t.document;n=t.scrollMaxX||Math.max(r.body.scrollWidth,r.body.offsetWidth,r.documentElement.clientWidth,r.documentElement.scrollWidth,r.documentElement.offsetWidth)}else n=e.scrollWidth;break;default:n=t}return e.scroll({behavior:s,top:r,left:n}),o};const z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=-1!==e.localName.indexOf("-");if(n&&t&&customElements){const t=customElements.get(e.localName);return!!t&&(!r||t===e.constructor)}return n},J=async e=>(await customElements.whenDefined(e.localName),e);let G=1;const Y={};let Q=!1;const X="setImmediate$"+Math.random()+"$";function K(e){window.postMessage(X+e,"*")}function Z(e){delete Y[e]}function ee(e){if(Q)setTimeout(ee,0,e);else{const t=Y[e];if(t){Q=!0;try{!function(e){(0,e.callback)(...e.args)}(t)}finally{Z(e),Q=!1}}}}window.addEventListener("message",(function(e){e.source===window&&"string"==typeof e.data&&0===e.data.indexOf(X)&&ee(+e.data.slice(X.length))}),!1);window.setImmediate,window.clearImmediate;const te=()=>{const e=navigator.userAgent,t=window.navigator.platform,r={windows7:/Windows NT 6.1/,windows8:/Windows NT 6.2/,windows81:/Windows NT 6.3/,windows10:/Windows NT 10.0/,windows:/windows/i,windowsPhone:/trident/i,android:/android/i,ios:/(ipad|iphone|ipod)/i,linux:/(linux)/i,unix:/(openbsd|freebsd|netbsd)/i,osxCatalina:/macintosh.+10(_|\.)15/i,osxBigSur:/macintosh.+((10(_|\.)16)|(11(_|\.)))/i,osx:/macintosh/i,mac:/mac/i},n={linux:/Linux/i,unix:/(FreeBSD|OpenBSD|X11|SunOS)/i,webOS:/webOS/i,playstation3:/playstation 3/i,playstation4:/playstation 4/i,PlaystationPortable:/psp/i,newNintendo3Ds:/new nintendo 3ds/i,nintendoDsi:/nintendo dsi/i,nintendo3Ds:/nintendo 3ds/i,nintendoWii:/nintendo wii/i,nintendoWiiU:/nintendo wiiu/i,palmos:/palmos/i,symbian:/(nokia_series_40|s60|symbian)/i};for(const t of Object.keys(r)){if(r[t].test(e))return"mac"===t&&"ontouchend"in document?"ios":t}for(const e of Object.keys(n)){if(n[e].test(t))return e}return"Unknown"},re=()=>{const e=te();let t=!1,r=!1,n=!1;switch(e){case"windows":case"windows10":case"windows7":case"windows8":case"windows81":case"osxBigSur":case"osxCatalina":case"osx":case"mac":case"linux":case"unix":r=!0;break;case"ios":case"android":case"windowsPhone":case"symbian":t=!0}return-1===e.indexOf("playstation")&&-1===e.indexOf("nintendo")||(n=!0),{isMobile:t,isDesktop:r,isGameConsole:n}};class ne extends ue{constructor(){super(...arguments),m(this,"name","mustache-text")}routine(e,t){e.data=null!=t?t:""}}const ie=/^'.*'$|^".*"$/,se=/((?:'[^']*')*(?:(?:[^|']*(?:'[^']*')+[^|']*)+|[^|]+))|^$/g;function oe(e){let t=0,r=e;if(void 0===e)return{type:t,value:void 0};if(ie.test(e)){r=e.slice(1,-1);const t=y(r);r=t||r}else if("true"===e)r=!0;else if("false"===e)r=!1;else if("null"===e)r=null;else if("undefined"===e)r=void 0;else if(""===e)r=void 0;else if(isNaN(Number(e)))if(v(r)){const e=y(r);r=e||r}else t=1;else r=Number(e);return{type:t,value:r}}function ae(e,t){let r=null;const n=e.length;let i=0,s=0;const o=t[0],a=t[1];for(;s<n;){if(i=e.indexOf(o,s),i<0){r&&r.push({type:0,value:e.slice(s)});break}{if(r=r||[],i>0&&s<i&&r.push({type:0,value:e.slice(s,i)}),s=i+o.length,i=e.indexOf(a,s),i<0){const t=e.slice(s-o.length),n=r[r.length-1];n&&0===n.type?n.value+=t:r.push({type:0,value:t});break}const t=e.slice(s,i).trim();r.push({type:1,value:t}),s=i+a.length}}return r}function ce(e,t,r){let n=!1;if((t=t).nodeType===Node.TEXT_NODE){let i=null;if(t.data&&(i=ae(t.data,r)),i&&i.length){for(let r=0;r<i.length;r++){const n=i[r],s=document.createTextNode(n.value);t.parentNode&&s&&t&&t.parentNode.insertBefore(s,t),1===n.type&&e.buildBinding(s,null,n.value,ne,null)}t.parentNode&&t.parentNode.removeChild(t)}n=!0}else t.nodeType===Node.ELEMENT_NODE&&(n=e.traverse(t));if(!n&&t.childNodes&&t.childNodes.length>0)for(let n=0;n<t.childNodes.length;n++){const i=t.childNodes[n];i&&ce(e,i,r)}}function le(e){const t=e.match(se);if(null===t)throw new Error("[View] No matches");const r=t.map((e=>e.trim()));return{keypath:r.shift()||void 0,pipes:r}}const de=/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g,he=/\s+/;class ue{constructor(e,t,r,n,i,s){m(this,"publishes",!1),m(this,"priority",0),m(this,"formatterObservers",{}),console.warn(`[Binding][${r}] Binding objects are deprecated, Binding objects are deprecated, please use a binding class instead`),this.view=e,this.el=t,this.type=r,this.keypath=n,this.formatters=i,this.model=void 0,this.customData={},this.args=s&&r?this.getStarArguments(s,r):new Array}observe(e,t,r){return new S(e,t,r)}parseTarget(){if(this.keypath){const e=oe(this.keypath);if(0===e.type)this.value=e.value;else{if(1!==e.type)throw new Error(`[${this.name}] Unknown type in token`);this.observer=this.observe(this.view.models,this.keypath,this),this.model=this.observer.target}}else this.value=void 0}getIterationAlias(e){return"%"+e+"%"}parseFormatterArguments(e,t){return e.map(oe).map(((e,r)=>{let{type:n,value:i}=e;if(0===n){return i}if(1===n){const e=i;this.formatterObservers[t]||(this.formatterObservers[t]={});let n=this.formatterObservers[t][r];return n||(n=this.observe(this.view.models,e,this),this.formatterObservers[t][r]=n),n.value()}throw new Error(`[${this.name}] Unknown argument type`)}))}formattedValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null===this.formatters)throw new Error(`[${this.name} formatters is null`);let r=!1;const n=t?this.formatters.slice(t):this.formatters;return n.reduce(((t,i,s)=>{if(r)return t;const o=i.match(de);if(null===o)return console.warn(new Error(`[${this.name}] No args matched with regex "FORMATTER_ARGS"!\nvalue: ${JSON.stringify(e)}\nresult: ${JSON.stringify(t)}\ndeclaration: ${JSON.stringify(i)}\nindex: ${s}\n`)),t;const a=o.shift();if(!a)throw new Error(`[${this.name}] No formatter id found in args!`);if(!this.view.options.formatters)throw new Error(`[${this.name}] No formatters are defined!`);const c=this.view.options.formatters[a];if(!c)throw new Error(`[${this.name}] No formatters with id "${a}" found!`);const l=this.parseFormatterArguments(o,s);return c&&"function"==typeof c.read&&(t=c.read.apply(this.model,[t,...l])),s<n.length-1&&t&&"function"==typeof t.then&&"function"==typeof t.catch?(r=!0,t.then((e=>this.formattedValue(e,s+1)))):t}),e)}eventHandler(e,t){const r=this.view.options.handler;return n=>{if(!r)throw new Error("No handler defined in binding.view.options.handler");r.call(e,this,n,this,t)}}set(e){try{e=this.formattedValue(e)}catch(t){return console.error(t),e}"function"==typeof this.routine&&(e&&"function"==typeof e.then&&"function"==typeof e.catch?e.then((e=>{this.routine(this.el,e)})).catch((e=>{console.error(e)})):this.routine(this.el,e))}sync(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)}publish(){if(this.observer){if(null===this.formatters)throw new Error("formatters is null");const e=this.formatters.reduceRight(((e,t,r)=>{const n=t.split(he),i=n.shift();if(!i)throw new Error("id not defined");if(!this.view.options.formatters)return;const s=this.view.options.formatters[i],o=this.parseFormatterArguments(n,r);return s&&"function"==typeof s.publish&&(e=s.publish(e,...o)),e}),this._getValue(this.el));this.observer.setValue(e)}}_bind(){if(this.parseTarget(),this.bind){if("function"!=typeof this.bind)throw new Error("the method bind is not a function");this.bind(this.el)}this.view.options.preloadData&&this.sync()}_unbind(){this.unbind&&this.unbind(this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach((e=>{const t=this.formatterObservers[e];Object.keys(t).forEach((e=>{t[e].unobserve()}))})),this.formatterObservers={}}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.observer&&(this.model=this.observer.target),"function"==typeof this.update&&this.update(e)}_getValue(e){return"function"==typeof this.getValue?this.getValue(e):q(e)}getStarArguments(e,t){const r=new RegExp(`^${e.replace(/\*/g,"(.+)")}$`),n=t.match(r);return n&&n.slice(1)||[]}}m(ue,"block",!1);class pe extends ue{constructor(){super(...arguments),m(this,"name","add-class"),m(this,"function",!0),m(this,"priority",1e3)}bind(e){this.staticClasses=e.className.split(" ")}unbind(){delete this.staticClasses}routine(e,t){var r;t?-1===(null===(r=this.staticClasses)||void 0===r?void 0:r.indexOf(t))&&(e.className=this.staticClasses.join(" ")+" "+t):this.staticClasses&&(e.className=this.staticClasses.join(" "));e.className=e.className.trim()}}const me={name:"animate-*",function:!0,priority:1e3,bind(e){const t=this.args[0];e.classList.add(t)},unbind(){},routine(e,t){const r=this.args[0];t?(e.classList.add(r+"-start"),e.classList.remove(r+"-done")):(e.classList.remove(r+"-start"),e.classList.add(r+"-done"))}},fe={name:"assign",routine(e,t){if("object"==typeof t)return _({deep:!1},this.view.models,t);console.warn("Value must be an object or propertyName is required")}},be={name:"assign-*",routine(e,t){const r=D(this.args[0].trim());this.view.models[r]=t}},ve={name:"block",block:!0,routine(){}},ge={name:"checked",publishes:!0,priority:2e3,bind(e){this.customData={onChange:this.publish.bind(this)},e.addEventListener("change",this.customData.onChange)},unbind(e){e.removeEventListener(this.customData.event,this.customData.onChange)},routine(e,t){const r=this._getValue(e);"radio"===e.type?e.checked=k(r)===k(t):r!==t&&(e.checked=!!t)},getValue:q},ye={name:"class-*",routine(e,t){if(null===this.args)throw new Error("args is null");const r=e.className.split(" ").filter((e=>""!==e)),n=this.args[0].trim(),i=r.indexOf(n);-1===i?t&&(e.className+=` ${n}`):t||(e.className=r.filter(((e,t)=>t!==i)).join(" "))}},we={name:"co-*",publishes:!0,_routine(e,t){const r=this.args[0].trim();e.setBinderAttribute?void 0!==t&&e.setBinderAttribute(r,t):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)},async routine(e,t){z(e,!0,!0)?we._routine.call(this,e,t):z(e,!0)?(await J(e),we._routine.call(this,e,t)):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)},_bind(e){const t=this.args[0].trim();"function"==typeof e.observeAttribute?this.customData={componentAttributeObserver:e.observeAttribute(t,{sync:()=>{this.publish()}})}:console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)},async bind(e){z(e,!0,!0)?we._bind.call(this,e):z(e,!0)?(await J(e),we._bind.call(this,e)):console.warn("[componentAttributeBinder] You can only use this binder on Riba components",e)},unbind(){var e,t;null===(e=this.customData)||void 0===e||null===(t=e.componentAttributeObserver)||void 0===t||t.unobserve()},getValue(e){const t=this.args[0].trim();return e.getBinderAttribute(t)}},Ae={name:"style-*",routine(e,t){const r=this.args[0];null==t||""===t?e.style.removeProperty(r.toString()):e.style.setProperty(r.toString(),t)}},Ee={name:"style",routine(e,t){if(t)if("string"==typeof t)e.setAttribute("style",t);else for(const r of Object.keys(t))e.style.setProperty(r.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),t[r]||null);else for(const t of Object.keys(e.style))e.style.removeProperty(t)}},ke={name:"tag-*",priority:-1e3,bind(e){this.customData={originalTag:e.tagName.toLowerCase()}},routine(e,t){if(null===this.args)throw new Error("args is null");const r=this.el.tagName.toLowerCase();let n;if(n=t?this.args[0].trim().toLowerCase():this.customData.originalTag.toLowerCase(),r!==n){const t=document.createElement(n);for(;e.childNodes.length>0;)e.firstChild&&t.appendChild(e.firstChild);const r=Array.prototype.slice.call(e.attributes);for(const e of r)console.debug("attribute",e),t.setAttribute(e.name,e.value);e.parentNode?e.parentNode.replaceChild(t,e):console.warn("No parent"),this.el=t}}},Oe={name:"enabled",routine(e,t){e.disabled=!t}},Ne={name:"flex-sort-childs",priority:9e4,routine(e,t){const r=Array.from(e.children);r.sort(((e,r)=>e.dataset.sortBy&&r.dataset.sortBy?e.dataset.sortBy<r.dataset.sortBy?t?1:-1:e.dataset.sortBy>r.dataset.sortBy?t?-1:1:0:0));for(let e=0;e<r.length;e++){r[e].style.order=e.toString()}}},Ce={name:"disabled",routine(e,t){e.disabled=!!t}},De={name:"maxlength",bind(){this.customData={}},routine(e,t){"number"==typeof t?(e.setAttribute("maxlength",t.toString()),e.maxLength=t):e.removeAttribute("maxlength")}},_e={name:"not-draggable",bind(){this.customData={}},routine(e){e.addEventListener("dragstart",(e=>(e.preventDefault(),!1)))}},Pe={name:"on-*",function:!0,priority:1e3,bind(){this.customData={handler:null}},unbind(e){if(this.customData.handler){if(null===this.args)throw new Error("args is null");const t=this.args[0];e.removeEventListener(t,this.customData.handler)}},routine(e,t){if(null===this.args)throw new Error("args is null");const r=this.args[0],n={passive:"true"===this.el.dataset.passive};this.customData.handler&&e.removeEventListener(r,this.customData.handler,n),this.customData.handler=this.eventHandler(t,e).bind(this.customData),e.addEventListener(r,this.customData.handler,n)}},Be={name:"parent",routine(){},_bind(e){e.setBinderAttribute?e.setBinderAttribute("$parent",this.view.models):console.warn("[parentBinder] You can only use this binder on Riba components",e.localName,customElements.get(e.localName))},async bind(e){z(e,!0,!0)?Be._bind.call(this,e):z(e,!0)?(console.debug(`[parentBinder] CustomElement ${e.localName} has been defined, but not yet upgraded. Waiting for upgrade.`,e),await J(e),Be._bind.call(this,e)):console.warn("[parentBinder] You can only use this binder on Riba components",e.localName)}},xe={name:"readonly",bind(){this.customData={}},routine(e,t){t=!!t,e.readOnly=t,t?e.setAttribute("readonly",""):e.removeAttribute("readonly")}},Se={name:"remove-class",bind(e){this.customData={staticClassesString:e.className}},routine(e,t){const r=new RegExp(`\\b${t}\\b`,"g");e.className=this.customData.staticClassesString.replace(r,"").trim()}},Te={name:"json",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=JSON.stringify(e,null,t);return r&&n?n.replace(/'/g,"&#39;"):n}},je={name:"*",bind(){},unbind(){delete this.customData},routine(e,t){if(!this.type)throw new Error("Can't set attribute of "+this.type);const r=e.getAttribute(this.type);let n;switch(typeof t){case"string":case"number":case"boolean":n=t;break;case"object":null===t?t=null:n=Te.read(t,0);break;default:n=t}null!=n?String(r).toString()!==String(n).toString()&&(e.setAttribute(this.type,n),e.dispatchEvent(new CustomEvent("binder-changed",{detail:{name:this.type,newValue:n,oldValue:r}}))):(e.removeAttribute(this.type),e.dispatchEvent(new CustomEvent("binder-changed",{detail:{name:this.type,newValue:n,oldValue:r}})))}};class Fe{constructor(e,t,r,n,i){this.binderDeprecated=new j(e),this.binder=new F(t),this.component=new V(r),this.formatter=new R(n),this.adapter=new T(i)}regist(e){if(!e)throw console.error(e),new Error("The Riba module is falsy!");e.bindersDeprecated&&this.binderDeprecated.regists(e.bindersDeprecated),e.binders&&this.binder.regists(e.binders),e.components&&this.component.regists(e.components),e.formatters&&this.formatter.regists(e.formatters),e.adapters&&this.adapter.regists(e.adapters)}}function Le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class Me{static handler(e,t,r,n){if(!this||!this.call){const e=new Error(`[rv-${r.type}="${r.keypath}"] Event handler "${r.keypath}" not found!"`);throw console.error(e,r,n,r.view.models),e}this.call(e,t,r.view.models,n)}set prefix(e){if(Array.isArray(e)){this._prefix=[],this._fullPrefix=[];for(const t of e)this._prefix.push(t),this._fullPrefix.push(t+"-")}}get prefix(){return this._prefix}get fullPrefix(){return this._fullPrefix}constructor(){if(m(this,"lifecycle",M.getInstance()),m(this,"binders",{}),m(this,"bindersDeprecated",{}),m(this,"components",{}),m(this,"formatters",{}),m(this,"adapters",{}),m(this,"parseTemplate",ae),m(this,"parseType",oe),m(this,"templateDelimiters",["{","}"]),m(this,"rootInterface","."),m(this,"preloadData",!0),m(this,"removeBinderAttributes",!0),m(this,"blockNodeNames",["SCRIPT","STYLE","TEMPLATE","CODE"]),m(this,"blockUnknownCustomElements",!0),m(this,"_prefix",["rv"]),m(this,"_fullPrefix",["rv-"]),this.module=new Fe(this.bindersDeprecated,this.binders,this.components,this.formatters,this.adapters),Me.instance)return Me.instance;Me.instance=this}configure(e){if(e)for(const[t,r]of Object.entries(e))switch(t){case"binders":this.binders=$e($e({},this.binders),r);break;case"formatters":this.formatters=$e($e({},this.formatters),r);break;case"components":this.components=$e($e({},this.components),r);break;case"adapters":this.adapters=$e($e({},this.adapters),r);break;case"prefix":this.prefix=r;break;case"parseTemplate":this.parseTemplate=r;break;case"parseType":this.parseType=r;break;case"templateDelimiters":this.templateDelimiters=r;break;case"rootInterface":this.rootInterface=r;break;case"preloadData":this.preloadData=r;break;case"blockNodeNames":this.blockNodeNames=r;break;case"blockUnknownCustomElements":this.blockUnknownCustomElements=Boolean(r);break;default:console.warn("Option not supported",t,r)}}getViewOptions(e){const t={adapters:{},binders:{},components:{},formatters:{},attributeBinders:{},rootInterface:{}};if(e&&(t.binders=$e($e({},t.binders),e.binders),t.formatters=$e($e({},t.formatters),e.formatters),t.components=$e($e({},t.components),e.components),t.adapters=$e($e({},t.adapters),e.adapters)),null!=e&&e.prefix&&Array.isArray(null==e?void 0:e.prefix)){t.prefix=[],t.fullPrefix=[];for(const r of e.prefix)t.prefix.push(r),t.fullPrefix.push(r+"-")}else t.prefix=this.prefix,t.fullPrefix=this.fullPrefix;return t.templateDelimiters=(null==e?void 0:e.templateDelimiters)||this.templateDelimiters,t.rootInterface=(null==e?void 0:e.rootInterface)||this.rootInterface,t.removeBinderAttributes="boolean"==typeof(null==e?void 0:e.removeBinderAttributes)?e.removeBinderAttributes:this.removeBinderAttributes,t.blockNodeNames=(null==e?void 0:e.blockNodeNames)||this.blockNodeNames,t.preloadData="boolean"==typeof(null==e?void 0:e.preloadData)?e.preloadData:this.preloadData,t.handler=(null==e?void 0:e.handler)||Me.handler,t.binders=$e($e({},this.binders),t.binders),t.formatters=$e($e({},this.formatters),t.formatters),t.components=$e($e({},this.components),t.components),t.adapters=$e($e({},this.adapters),t.adapters),t.binders&&(t.attributeBinders=Object.keys(t.binders).filter((e=>e.indexOf("*")>=1))),t}bind(e,t,r){const n=this.getViewOptions(r);t=t||Object.create(null),S.updateOptions(n);const i=new Re(e,t,n);return i.bind(),i}}m(Me,"fallbackBinder",class extends ue{constructor(){super(...arguments),m(this,"name","*")}bind(){}unbind(){}routine(e,t){if(!this.type)throw new Error("Can't set attribute of "+this.type);const r=e.getAttribute(this.type);let n;switch(typeof t){case"string":case"number":case"boolean":n=t;break;case"object":null===t?t=null:n=Te.read(t,0);break;default:n=t}null!=n?String(r).toString()!==String(n).toString()&&(e.setAttribute(this.type,n),e.dispatchEvent(new CustomEvent("binder-changed",{detail:{name:this.type,newValue:n,oldValue:r}}))):(e.removeAttribute(this.type),e.dispatchEvent(new CustomEvent("binder-changed",{detail:{name:this.type,newValue:n,oldValue:r}})))}}),m(Me,"fallbackBinderDeprecated",je),window.Riba=Me;class Ve{constructor(e,t,r,n,i,s,o){m(this,"formatterObservers",{}),console.warn(`[Binding][${r}] Binding objects are deprecated, Binding objects are deprecated, please use a binding class instead`),this.view=e,this.el=t,this.type=r,this.keypath=n,this.binder=i,this.formatters=s,this.model=void 0,this.customData={},this.args=o&&r?this.getStarArguments(o,r):new Array}observe(e,t,r){return new S(e,t,r)}parseTarget(){if(this.keypath){const e=oe(this.keypath);if(0===e.type)this.value=e.value;else{if(1!==e.type)throw new Error(`[${this.binder.name}] Unknown type in token`);this.observer=this.observe(this.view.models,this.keypath,this),this.model=this.observer.target}}else this.value=void 0}getIterationAlias(e){return"%"+e+"%"}parseFormatterArguments(e,t){return e.map(oe).map(((e,r)=>{let{type:n,value:i}=e;if(0===n){return i}if(1===n){const e=i;this.formatterObservers[t]||(this.formatterObservers[t]={});let n=this.formatterObservers[t][r];return n||(n=this.observe(this.view.models,e,this),this.formatterObservers[t][r]=n),n.value()}throw new Error(`[${this.binder.name}] Unknown argument type`)}))}formattedValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null===this.formatters)throw new Error(`[${this.binder.name} formatters is null`);let r=!1;const n=t?this.formatters.slice(t):this.formatters;return n.reduce(((t,i,s)=>{if(r)return t;const o=i.match(de);if(null===o)return console.warn(new Error(`[${this.binder.name}] No args matched with regex "FORMATTER_ARGS"!\nvalue: ${JSON.stringify(e)}\nresult: ${JSON.stringify(t)}\ndeclaration: ${JSON.stringify(i)}\nindex: ${s}\n`)),t;const a=o.shift();if(!a)throw new Error(`[${this.binder.name}] No formatter id found in args!`);if(!this.view.options.formatters)throw new Error(`[${this.binder.name}] No formatters are defined!`);const c=this.view.options.formatters[a];if(!c)throw new Error(`[${this.binder.name}] No formatters with id "${a}" found!`);const l=this.parseFormatterArguments(o,s);return c&&"function"==typeof c.read&&(t=c.read.apply(this.model,[t,...l])),s<n.length-1&&t&&"function"==typeof t.then&&"function"==typeof t.catch?(r=!0,t.then((e=>this.formattedValue(e,s+1)))):t}),e)}eventHandler(e,t){const r=this,n=r.view.options.handler;return i=>{if(!n)throw new Error("No handler defined in binding.view.options.handler");n.call(e,this,i,r,t)}}set(e){if(null!==this.binder){try{e=this.formattedValue(e)}catch(t){return console.error(t),e}this.binder&&"function"==typeof this.binder.routine&&(e&&"function"==typeof e.then&&"function"==typeof e.catch?e.then((e=>{this.binder.routine.call(this,this.el,e)})).catch((e=>{console.error(e)})):this.binder.routine.call(this,this.el,e))}else console.warn(new Error("Binder is null"),this)}sync(){this.observer?(this.model=this.observer.target,this.set(this.observer.value())):this.set(this.value)}publish(){if(this.observer){if(null===this.formatters)throw new Error("formatters is null");const e=this.formatters.reduceRight(((e,t,r)=>{const n=t.split(he),i=n.shift();if(!i)throw new Error("id not defined");if(!this.view.options.formatters)return;const s=this.view.options.formatters[i],o=this.parseFormatterArguments(n,r);return s&&"function"==typeof s.publish&&(e=s.publish(e,...o)),e}),this._getValue(this.el));this.observer.setValue(e)}}_bind(){if(this.parseTarget(),this.binder&&this.binder.bind){if("function"!=typeof this.binder.bind)throw new Error("the method bind is not a function");this.binder.bind.call(this,this.el)}this.view.options.preloadData&&this.sync()}_unbind(){this.binder?(this.binder.unbind&&this.binder.unbind.call(this,this.el),this.observer&&this.observer.unobserve(),Object.keys(this.formatterObservers).forEach((e=>{const t=this.formatterObservers[e];Object.keys(t).forEach((e=>{t[e].unobserve()}))})),this.formatterObservers={}):console.warn(new Error("Binder is not defined"),this)}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.observer&&(this.model=this.observer.target),null===this.binder)throw new Error("binder is null");"function"==typeof this.binder.update&&this.binder.update.call(this,e)}_getValue(e){if(null===this.binder)throw new Error("binder is null");return"function"==typeof this.binder.getValue?this.binder.getValue.call(this,e):q(e)}getStarArguments(e,t){const r=new RegExp(`^${e.replace(/\*/g,"(.+)")}$`),n=t.match(r);return n&&n.slice(1)||[]}}class Re{static createDeprecated(e,t,r){var n;const i=e.el.cloneNode(!0),s=new Re(i,t,e.view.options);return s.bind(),null!=e&&null!==(n=e.marker)&&void 0!==n&&n.parentNode?e.marker.parentNode.insertBefore(i,r):console.warn("[View]: No parent node for binding!"),s}static create(e,t,r){var n;const i=e.el.cloneNode(!0),s=new Re(i,t,e.view.options);return s.bind(),null!=e&&null!==(n=e.marker)&&void 0!==n&&n.parentNode?e.marker.parentNode.insertBefore(i,r):console.warn("[View]: No parent node for binding!"),s}constructor(e,t,r){m(this,"bindings",[]),m(this,"webComponents",[]),Array.isArray(e)?this.els=e:this.els=[e],this.models=t,this.options=r,this.build()}registComponents(){for(const e in this.options.components)if(this.options.components[e]&&!customElements.get(e)){const t=this.options.components[e];this.registComponent(t,e)}}bind(){this.bindings.forEach((e=>{e._bind()}))}unbind(){Array.isArray(this.bindings)&&this.bindings.forEach((e=>{e._unbind(),e.el,this.options.removeBinderAttributes})),Array.isArray(this.webComponents)&&this.webComponents.forEach((e=>{"function"==typeof e.unbind&&e.unbind()}))}sync(){this.bindings.forEach((e=>{e.sync&&e.sync()}))}publish(){this.bindings.forEach((e=>{e.binder&&e.binder.publishes&&e.publish&&e.publish(),e.publishes&&e.publish&&e.publish()}))}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((t=>{this.models[t]=e[t]}));for(const t of this.bindings)t._update(e)}build(){if(this.bindings=[],!this.options.templateDelimiters)throw new Error("templateDelimiters required");const e=this.els;for(let t=0;t<e.length;t++){const r=e[t];r&&ce(this,r,this.options.templateDelimiters)}this.bindings.sort(Re.bindingComparator)}startsWithPrefix(e){const t=this.options.fullPrefix;if(!t)throw new Error("prefix is required");for(const r of t)if(e.startsWith(r))return r}bindBindersDeprecated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.attributeBinders;if(!this.options.bindersDeprecated)return;const n=[];for(let i=0,s=e.length;i<s;i++){let s="",o=null,a="";const c=e[i],l=this.startsWithPrefix(c.name);if(l){if(s=c.name.slice(l.length),this.options.bindersDeprecated[s]&&(o=this.options.bindersDeprecated[s]),null===o)for(let e=0;e<r.length;e++){a=r[e];if(new RegExp(`^${a.replace(/\*/g,".+")}$`).test(s)){o=this.options.bindersDeprecated[a];break}}if(null===o&&(this.options.bindersDeprecated["*"]?(o=this.options.bindersDeprecated["*"],a="*"):o=Me.fallbackBinderDeprecated),o.block)return this.buildBindingDeprecated(t,s,c.value,o,a),t.removeAttribute&&this.options.removeBinderAttributes&&t.removeAttribute(c.name),!0;n.push({attr:c,binder:o,nodeName:s,identifier:a})}}for(let e=0;e<n.length;e++){const r=n[e];this.buildBindingDeprecated(t,r.nodeName,r.attr.value,r.binder,r.identifier),t.removeAttribute&&this.options.removeBinderAttributes&&t.removeAttribute(r.attr.name)}}bindBinders(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options.attributeBinders;if(!this.options.binders)return;const n=[];for(let i=0,s=e.length;i<s;i++){let s="",o=null,a="";const c=e[i],l=this.startsWithPrefix(c.name);if(l){if(s=c.name.slice(l.length),this.options.binders[s]&&(o=this.options.binders[s]),null===o)for(let e=0;e<r.length;e++){a=r[e];if(new RegExp(`^${a.replace(/\*/g,".+")}$`).test(s)){o=this.options.binders[a];break}}if(null===o&&(this.options.binders["*"]?(o=this.options.binders["*"],a="*"):o=Me.fallbackBinder),o.block)return this.buildBinding(t,s,c.value,o,a),t.removeAttribute&&this.options.removeBinderAttributes&&t.removeAttribute(c.name),!0;n.push({attr:c,binder:o,nodeName:s,identifier:a})}}for(let e=0;e<n.length;e++){const r=n[e];this.buildBinding(t,r.nodeName,r.attr.value,r.binder,r.identifier),t.removeAttribute&&this.options.removeBinderAttributes&&t.removeAttribute(r.attr.name)}}bindComponent(e){let t=!1;if(!this.options.components)return t;const r=e.nodeName.toLowerCase(),n=this.options.components[r];return n?(this.registComponent(n,r),t=!0):this.options.blockUnknownCustomElements&&z(e)&&!r.endsWith("-page")&&(t=!0),t}traverse(e){let t=-1!==this.options.blockNodeNames.indexOf(e.nodeName);const r=e.attributes;return r&&this.options.bindersDeprecated&&this.bindBindersDeprecated(r,e),r&&this.options.binders&&this.bindBinders(r,e),t||e._bound||!this.options.components||(t=this.bindComponent(e)),t}buildBinding(e,t,r,n,i){const s=le(r),o=s.keypath,a=s.pipes;this.bindings.push(new n(this,e,t,o,a,i))}buildBindingDeprecated(e,t,r,n,i){const s=le(r),o=s.keypath,a=s.pipes;this.bindings.push(new Ve(this,e,t,o,n,a,i))}registComponent(e,t){if(!customElements)throw console.error("customElements not supported by your browser!"),new Error("customElements not supported by your browser!");const r=t||e.tagName;customElements.get(r)||customElements.define(e.tagName,e)}}m(Re,"bindingComparator",((e,t)=>{var r,n;const i=(null==e||null===(r=e.binder)||void 0===r?void 0:r.priority)||e.priority||0;return((null==t||null===(n=t.binder)||void 0===n?void 0:n.priority)||t.priority||0)-i}));const Ie={name:"if",block:!0,priority:4e3,bind(e){var t,r,n;(this.customData={},this.marker)?this.customData.nested&&this.customData.nested.bind():(this.marker=null===(t=window)||void 0===t||null===(r=t.document)||void 0===r?void 0:r.createComment(" riba: "+this.type+" "+this.keypath+" "),this.customData.attached=!1,null!==(n=e.parentNode)&&void 0!==n&&n.insertBefore&&(e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)))},unbind(){this.customData.nested&&this.customData.nested.unbind()},routine(e,t){(t=!!t)!==this.customData.attached&&(t?(this.customData.nested||(this.customData.nested=new Re(e,this.view.models,this.view.options),this.customData.nested.bind()),this.marker&&this.marker.parentNode&&this.marker.parentNode.insertBefore(e,this.marker.nextSibling),this.customData.attached=!0):(e.parentNode&&e.parentNode.removeChild(e),this.customData.attached=!1))},update(e){this.customData.nested&&this.customData.nested.update(e)}},Ue={name:"each-*",block:!0,priority:4e3,bind(e){var t,r,n;this.marker?this.customData.iterated.forEach((e=>{e.bind()})):(this.marker=null===(t=window)||void 0===t||null===(r=t.document)||void 0===r?void 0:r.createComment(` riba: ${this.type} `),this.customData={iterated:[]},null!==(n=e.parentNode)&&void 0!==n&&n.insertBefore&&this.marker&&(e.parentNode.insertBefore(this.marker,e),e.parentNode.removeChild(e)))},unbind(){this.customData.iterated&&this.customData.iterated.forEach((e=>{e.unbind()}))},routine(e,t){if(null===this.args)throw new Error("args is null");let r=!1;const n=D(this.args[0].toString());if(t=t||[],Array.isArray(t)||"object"!=typeof t||null===t||(console.debug("original collection",t),t=Object.entries(t).map((e=>{let[t,r]=e;return{key:t,value:r}})),r=!0,console.debug("converted collection",t)),!Array.isArray(t))throw new Error(`each-${this.args[0]} needs an array or object to iterate over, but it is ${typeof t}`);const i=e.getAttribute("index-property")||this.getIterationAlias(n);t.forEach(((e,t)=>{const s={$parent:this.view.models};r?(s[i]=e.key,s[n]=e.value):(s[i]=t,s[n]=e);let o=this.customData.iterated[t];if(o)if(o.models[n]!==e){let r,c;for(let i=t+1;i<this.customData.iterated.length;i++)if(c=this.customData.iterated[i],c.models[n]===e){r=i;break}if(void 0!==r){var a;if(this.customData.iterated.splice(r,1),!this.marker||null===(a=this.marker.parentNode)||void 0===a||!a.insertBefore)throw new Error("Marker has no parent node");c.els[0]&&o.els[0]&&this.marker.parentNode.insertBefore(c.els[0],o.els[0]),c.models[i]=t}else c=Re.createDeprecated(this,s,o.els[0]);this.customData.iterated.splice(t,0,c)}else o.models[i]=t;else{let e;if(this.customData.iterated.length?e=this.customData.iterated[this.customData.iterated.length-1].els[0]:this.marker&&(e=this.marker),!e)return;o=Re.createDeprecated(this,s,e.nextSibling),this.customData.iterated.push(o)}})),this.customData.iterated.length>t.length&&((e,t)=>{for(let r=0;r<e;r++)t()})(this.customData.iterated.length-t.length,(()=>{const e=this.customData.iterated.pop();if(e.unbind(),!this.marker||!this.marker.parentNode)throw new Error("Marker has no parent node");this.marker.parentNode.removeChild(e.els[0])})),"OPTION"===e.nodeName&&this.view.bindings&&this.view.bindings.forEach((e=>{this.marker&&e.el===this.marker.parentNode&&"value"===e.type&&e.sync&&e.sync()}))},update(e){const t={};Object.keys(e).forEach((r=>{if(null===this.args)throw new Error("args is null");r!==this.args[0]&&(t[r]=e[r])})),this.customData.iterated.forEach((e=>{e.update(t)}))}},He={name:"html",routine(e,t){e.innerHTML=void 0!==t?t:""}},qe={name:"hide",routine(e,t){e.style.display=t?"none":"",t?e.setAttribute("hidden","true"):e.removeAttribute("hidden")}},We={name:"show",routine(e,t){e.style.display=t?"":"none",t?e.removeAttribute("hidden"):e.setAttribute("hidden","true")}},ze={name:"srcset-*",routine(e,t){const r=this.args[0];let n=e.getAttribute("srcset");if("string"!=typeof n&&(n=""),"string"==typeof t&&t.length>0){n+=`${n.length>0?", ":""}${t} ${r}`}else{let e=n.split(",");e=e.map((e=>e.trim())),e=e.filter((e=>!(-1!==e.indexOf(r)))),n=e.join(", ")||""}e.setAttribute("srcset",n)}},Je={name:"style-background-image",routine(e,t){const r="background-image";null==t||""===t?e.style.removeProperty(r):e.style.setProperty(r,`url(${t})`)}},Ge={name:"text",routine(e,t){e.textContent=null!=t?t:""}},Ye={name:"toggle-on-*",bind(e){this.customData={handler:null,propertyKey:null,toggle:()=>{this.customData.propertyKey&&(this.view.models[this.customData.propertyKey]=!this.view.models[this.customData.propertyKey])}};const t=this.args[0],r="true"===this.el.dataset.passive;e.addEventListener(t,this.customData.toggle,{passive:r})},unbind(e){if(this.customData.handler){if(null===this.args)throw new Error("args is null");const t=this.args[0];e.removeEventListener(t,this.customData.toggle)}},routine(e,t){if(null===this.args)throw new Error("args is null");this.customData.propertyKey=t}},Qe={name:"template",bind(e){this.customData={nested:new Re(e,this.view.models,this.view.options)}},routine(e,t){var r,n;null===(r=this.customData.nested)||void 0===r||r.unbind(),e.innerHTML=t||"",this.customData.nested=new Re(e,this.view.models,this.view.options),null===(n=this.customData.nested)||void 0===n||n.bind()},unbind(){var e;null===(e=this.customData.nested)||void 0===e||e.unbind()},update(e){var t;null===(t=this.customData.nested)||void 0===t||t.update(e)}},Xe={name:"unless",block:!0,priority:4e3,bind:Ie.bind,unbind:Ie.unbind,routine(e,t){return Ie.routine.call(this,e,!t)},update:Ie.update},Ke=e=>{const t={};return t.type=e.type,t.tagName=e.tagName,t.contenteditable=!!e.getAttribute("contenteditable"),t.isRadio="INPUT"===t.tagName&&"radio"===t.type,t},Ze={name:"value",publishes:!0,priority:3e3,onChange(){this.publish()},bind(e){if(this.customData||(this.customData=Ke(e)),!this.customData.isRadio){this.customData.event=e.getAttribute("event-name")||"change input paste blur focus";const t=this;this.customData.onChange||(this.customData.onChange=()=>{t.publish()});const r=this.customData.event.split(" ");for(const t of r)e.addEventListener(t.trim(),this.customData.onChange,!1)}},unbind(e){const t=this.customData.event.split(" ");for(const r in t)e.removeEventListener(r.trim(),this.customData.onChange)},routine(e,t){let r=this._getValue(e);if(Array.isArray(t)||(t=null!=t?k(t):""),Array.isArray(r)||(r=null!=r?k(r):""),r!==t)if(this.customData||(this.customData=Ke(e)),this.customData.isRadio)e.setAttribute("value",t);else if("select-multiple"===e.type){if(Array.isArray(t))for(let r=0;r<e.options.length;r++){const n=e.options[r];n.selected=t.indexOf(n.value)>-1}}else e.getAttribute("contenteditable")?e.innerHTML=t:e.value=t},getValue:q},et=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};class tt extends HTMLElement{constructor(){super(),m(this,"_debug",!1),m(this,"templateLoaded",!1),m(this,"observedAttributesToCheck",{}),m(this,"observedAttributes",[]),this._debug&&(this._color=et())}remove(){this&&this.parentElement&&this.parentElement.removeChild(this)}_log(e){const t=this.constructor.name||this.tagName;this._color||(this._color=et());for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];!function(e){const t=[];e.color?(e.namespace?t.push(`%c[${e.namespace}] ${e.mode.toUpperCase()}: `):t.push(`%c${e.mode.toUpperCase()}: `),t.push(`color: ${e.color}`)):e.namespace?t.push(`[${e.namespace}] ${e.mode.toUpperCase()}: `):t.push(`${e.mode.toUpperCase()}: `);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.push(...n),console[e.mode](...t)}({namespace:t,color:this._color,mode:e},...n)}info(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._log("info",...t)}debug(){if(this._debug){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._log("debug",...t)}}error(){console.error(...arguments)}requiredAttributes(){return[]}async init(e){this.loadAttributes(e),this.getPassedObservedAttributes(e)}ready(){return this.allPassedObservedAttributesAreInitialized()&&this.checkRequiredAttributes()}attributeIsPassed(e){return this.hasAttribute(e)}getPassedObservedAttributes(e){const t=this.observedAttributesToCheck;for(const r of e)t[r]?t[r].passed||(t[r].passed=this.attributeIsPassed(r)):t[r]={passed:!1,initialized:!1}}allPassedObservedAttributesAreInitialized(){return Object.keys(this.observedAttributesToCheck).every((e=>{var t,r;return!(null!==(t=this.observedAttributesToCheck[e])&&void 0!==t&&t.passed)||(null===(r=this.observedAttributesToCheck[e])||void 0===r?void 0:r.initialized)}))}checkRequiredAttributes(){return this.requiredAttributes().every((e=>(e=D(e),this.scope.hasOwnProperty(e)&&void 0!==this.scope[e])))}parseAttribute(e){let t=e;if("true"===e)t=!0;else if("false"===e)t=!1;else if("null"===e)t=null;else if("undefined"===e)t=void 0;else if(""===e)t=void 0;else if(isNaN(Number(e))){const e=y(t);t=e||t}else t=Number(e),t>=Number.MAX_SAFE_INTEGER&&(t=e);return t}eventHandler(e){return function(t,r,n,i){if(!this||!this.call){const e=new Error(`[rv-${n.type}="${n.keypath}"] Event handler "${n.keypath}" not found!"`);throw console.error(n,i),e}this.call(e,r,n.view.models,i)}}connectedCallback(){}disconnectedCallback(){}async attributeChangedCallback(e,t,r,n){this.observedAttributesToCheck&&this.observedAttributesToCheck[e]&&(this.observedAttributesToCheck[e].initialized=!0),r=this.parseAttribute(r);const i=D(e);this.scope&&this.scope[i]&&(t=this.scope[i]),this.scope[i]=r,this.parsedAttributeChangedCallback(i,t,r,n)}parsedAttributeChangedCallback(e,t,r,n){this.debug("parsedAttributeChangedCallback called",e,t,r,n)}adoptedCallback(e,t){this.debug("adoptedCallback called",e,t)}async loadTemplate(){return!0===this.templateLoaded?null:this.checkRequiredAttributes()?(this.templateLoaded=!0,Promise.resolve(this.template()).then((e=>(e instanceof HTMLElement?(this.innerHTML="",this.appendChild(e)):null!==e&&(this.innerHTML=e),e))).catch((e=>(console.error(e),this.templateLoaded=!1,null)))):(this.debug("Not all required attributes are set to load the template"),null)}async beforeTemplate(){}async afterTemplate(e){this.debug("afterTemplate",e)}async onReady(){}observe(e,t){return new S(this.scope,e,t)}observeAttribute(e,t){const r=D(e);return this.observe(r,t)}setBinderAttribute(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=D(e),i=this.scope[n];this.attributeChangedCallback(e,i,t,r)}getBinderAttribute(e){const t=D(e);return this.scope[t]}loadAttributes(e){const t=this.attributes;for(const r in t){const n=t[r],i=n.nodeName;if(-1!==e.indexOf(i)){const e=n.nodeValue;this.attributeChangedCallback(i,void 0,e,null)}}}}class rt extends tt{get binds(){return this._binds}get bound(){return this._bound}get connected(){return this._connected}get disconnected(){return this._disconnected}constructor(){super(),m(this,"view",null),m(this,"_binds",!1),m(this,"_bound",!1),m(this,"_connected",!1),m(this,"_disconnected",!1),m(this,"lifecycleEvents",L.getInstance("lifecycle")),m(this,"autobind",!0),this.lifecycleEvents.trigger("Component:constructor",this.getLifecycleEventData()),this.lifecycleEvents.on("ComponentLifecycle:allBound",this.afterAllBind,this)}async init(e){try{return await super.init(e),this.lifecycleEvents.trigger("Component:init",this.getLifecycleEventData()),this.bindIfReady()}catch(e){this.throw(e)}}throw(e){e.message&&console.error(`[${this.tagName}] ${e.message}`),this.lifecycleEvents.trigger("Component:error",e,this.getLifecycleEventData()),this.error(e)}async bindIfReady(){if(this.ready()){await this.beforeTemplate();const e=await this.loadTemplate();return await this.afterTemplate(e),this.autobind&&await this.bind(),void await this.onReady()}this.debug("Not all required or passed attributes are set to load and bind the template",this.observedAttributesToCheck,this.scope)}async _beforeBind(){this._binds=!0,this.debug("Start to bind Riba"),this.lifecycleEvents.trigger("Component:beforeBind",this.getLifecycleEventData())}async beforeBind(){}async _afterBind(){this._binds=!1,this._bound=!0,this.lifecycleEvents.trigger("Component:afterBind",this.getLifecycleEventData())}async afterBind(){}async afterAllBind(){}getLifecycleEventData(){return{tagName:this.tagName.toLowerCase(),component:this}}disconnectedCallback(){try{this._disconnected=!0,this._connected=!1,super.disconnectedCallback(),this.lifecycleEvents.trigger("Component:disconnected",this.getLifecycleEventData()),this.lifecycleEvents.off("ComponentLifecycle:allBound",this.afterAllBind,this)}catch(e){this.throw(e)}}connectedCallback(){try{this._disconnected=!1,this._connected=!0,super.connectedCallback(),this.lifecycleEvents.trigger("Component:connected",this.getLifecycleEventData())}catch(e){this.throw(e)}}async attributeChangedCallback(e,t,r,n){try{super.attributeChangedCallback(e,t,r,n),await this.bindIfReady()}catch(e){this.throw(e)}}callFormatterHandler(e){return{name:"call",read:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!t)throw new Error(`[${e.tagName}] Can not use "call" formatter: fn is undefined!`);return t.apply(e,n)}}}argsFormatterHandler(e){return{name:"args",read:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(r,i,s,o)=>{if(!t)throw new Error(`[${e.tagName}] Can not use "args" formatter: fn is undefined!`);return n.push(r),n.push(i),n.push(s),n.push(o),t.apply(e,n)}}}}async bind(){if(this.binds||this.bound)return this.view;if(this.checkRequiredAttributes()){try{await this._beforeBind(),await this.beforeBind(),this.riba=new Me,this.view=this.getView(),this.view&&(this.scope=this.view.models,this.view.bind()),await this._afterBind(),await this.afterBind()}catch(e){this._binds=!1,this._bound=!1,this.throw(e)}return this.view}this.debug("Not all required attributes are set for bind")}getView(){try{var e;const t=null===(e=this.riba)||void 0===e?void 0:e.getViewOptions({handler:this.eventHandler(this),formatters:{call:this.callFormatterHandler(this),args:this.argsFormatterHandler(this)}});if(t){return new Re(Array.prototype.slice.call(this.childNodes),this.scope,t)}return null}catch(e){this.throw(e)}}async unbind(){try{this.view&&(this._binds=!1,this._bound=!1,this.view.unbind(),this.view=null)}catch(e){this.throw(e)}}async build(){try{this.view&&this.view.build()}catch(e){this.throw(e)}}}class nt extends rt{static get observedAttributes(){return["video-src","autoplay-on-min-buffer","autoplay-media-query"]}get muted(){return this.video&&this.video.muted}set muted(e){this.video.muted=e,this.scope.muted=this.video.muted,e?this.video.setAttribute("muted",""):this.video.removeAttribute("muted"),this.onUpdate()}get volume(){var e;return(null===(e=this.video)||void 0===e?void 0:e.volume)||0}set volume(e){this.video.volume=e,this.onUpdate()}get loop(){var e;return null===(e=this.video)||void 0===e?void 0:e.loop}set loop(e){this.video.loop=e,e?this.video.setAttribute("loop",""):this.video.removeAttribute("loop"),this.onUpdate()}get controls(){var e;return null===(e=this.video)||void 0===e?void 0:e.controls}set controls(e){this.video.controls=e,this.scope.controls=this.video.controls,e?(this.video.setAttribute("controls",""),this.video.dispatchEvent(new Event("mouseover")),this.video.dispatchEvent(new Event("mouseenter")),this.video.dispatchEvent(new Event("mousemove"))):this.video.removeAttribute("controls"),this.onUpdate()}get currentTime(){var e;return(null===(e=this.video)||void 0===e?void 0:e.currentTime)||0}set currentTime(e){this.video.currentTime=e,this.onUpdate()}get autoplay(){var e;return(null===(e=this.video)||void 0===e?void 0:e.autoplay)||!1}set autoplay(e){this.video.autoplay=e,this.onUpdate()}get height(){var e;return(null===(e=this.video)||void 0===e?void 0:e.height)||0}set height(e){this.video.height=e,this.onUpdate()}get width(){var e;return(null===(e=this.video)||void 0===e?void 0:e.width)||0}set width(e){this.video.width=e,this.onUpdate()}get poster(){var e;return null===(e=this.video)||void 0===e?void 0:e.poster}set poster(e){this.video.poster=e,this.onUpdate()}get preload(){var e;return null===(e=this.video)||void 0===e?void 0:e.preload}set preload(e){this.video.preload=e,this.onUpdate()}get disablePictureInPicture(){var e,t;return(null===(e=this.video)||void 0===e?void 0:e.disablePictureInPicture)||(null===(t=this.video)||void 0===t?void 0:t.hasAttribute("disablePictureInPicture"))||!1}set disablePictureInPicture(e){var t;void 0!==(null===(t=this.video)||void 0===t?void 0:t.disablePictureInPicture)&&(this.video.disablePictureInPicture=e),e?this.video.setAttribute("disablePictureInPicture",""):this.video.removeAttribute("disablePictureInPicture"),this.onUpdate()}get paused(){var e;return(null===(e=this.video)||void 0===e?void 0:e.paused)??!0}constructor(){super(),m(this,"autobind",!0),m(this,"alreadyStartedPlaying",!1),m(this,"wasPaused",!1),m(this,"_debug",!1),m(this,"scope",{muted:this.muted,volume:this.volume,loop:this.loop,controls:this.controls,currentTime:this.currentTime,videoSrc:void 0,autoplayOnMinBuffer:0,autoplayMediaQuery:"",disablePictureInPicture:this.disablePictureInPicture,paused:this.paused,loading:!1,duration:0,readyState:b.HAVE_NOTHING,buffer:0,toggleMute:this.toggleMute,toggleControls:this.toggleControls,play:this.play,pause:this.pause,togglePlay:this.togglePlay,togglePause:this.togglePause,reset:this.reset}),m(this,"onUpdate",this._onUpdate.bind(this)),m(this,"forceAutoplay",this._forceAutoplay.bind(this)),m(this,"onMediaQueryListEvent",this._onMediaQueryListEvent.bind(this)),m(this,"onVideoProgress",this._onVideoProgress.bind(this)),m(this,"onLoadStart",this._onLoadStart.bind(this)),m(this,"onCanPlay",this._onCanPlay.bind(this)),m(this,"onCanPlayThrough",this._onCanPlayThrough.bind(this)),m(this,"onWaiting",this._onWaiting.bind(this)),m(this,"onDurationChange",this._onDurationChange.bind(this)),m(this,"onTimeUpdate",this._onTimeUpdate.bind(this)),m(this,"onPlay",this._onPlay.bind(this)),m(this,"onPause",this._onPause.bind(this));const e=this.querySelector("video");this.video=e}toggleMute(){this.debug("toggleMute"),this.muted=!this.muted,this.onUpdate()}toggleControls(){this.debug("toggleControls"),this.controls=!this.controls,this.onUpdate()}play(){this.debug("play"),this.video.play()}pause(){this.debug("pause"),this.video.pause(),this.onUpdate()}togglePlay(){return this.paused?this.play():this.pause()}togglePause(){return this.debug("togglePause"),this.togglePlay()}reset(){this.debug("reset"),this.video.currentTime=0,this.onUpdate()}connectedCallback(){super.connectedCallback(),this.init(nt.observedAttributes)}initVideoElement(){const e=this.querySelector("video");if(!e)throw new Error("The video child element is required!");this.video=e,this.addEventListeners(),this.onUpdate()}resetVideo(){this.video.innerHTML="";const e=this.video.cloneNode(!0),t=this.querySelector(".video-wrapper");this.removeEventListeners(),this.video.remove(),t?t.appendChild(e):this.appendChild(e),this.video=e,this.video.hasAttribute("muted")?this.muted=!0:this.muted=!1,this.video.hasAttribute("controls")?this.controls=!0:this.controls=!1,this.video.hasAttribute("autoplay")?this.autoplay=!0:this.autoplay=!1,this.video.hasAttribute("height")&&(this.height=C(this.video.getAttribute("height")||0)),this.video.hasAttribute("width")&&(this.width=C(this.video.getAttribute("width")||0)),this.video.hasAttribute("loop")?this.loop=!0:this.loop=!1,this.video.hasAttribute("muted")?this.muted=!0:this.muted=!1,this.video.hasAttribute("poster")&&(this.poster=this.video.getAttribute("poster")||""),this.video.hasAttribute("preload")&&(this.preload=this.video.getAttribute("preload")||""),this.video.hasAttribute("disablePictureInPicture")?this.disablePictureInPicture=!0:this.disablePictureInPicture=!1,this.scope.readyState=b.HAVE_NOTHING,this.alreadyStartedPlaying=!1,this.scope.loading=!1,this.initVideoElement()}setVideoSource(){if(this.scope.videoSrc){this.resetVideo();let e=this.video.querySelector("source");e||(e=document.createElement("source"),this.video.appendChild(e)),e.setAttribute("src",this.scope.videoSrc)}}parsedAttributeChangedCallback(e,t,r,n){super.parsedAttributeChangedCallback(e,t,r,n),this.debug("parsedAttributeChangedCallback",e),"videoSrc"===e&&this.setVideoSource()}addEventListeners(){if(this.scope.autoplayMediaQuery){const e=window.matchMedia(this.scope.autoplayMediaQuery);e.addEventListener("change",this.onMediaQueryListEvent),e.matches&&this.startAutoplay()}this.video.addEventListener("progress",this.onVideoProgress),this.video.addEventListener("loadstart",this.onLoadStart),this.video.addEventListener("canplay",this.onCanPlay),this.video.addEventListener("canplaythrough",this.onCanPlayThrough),this.video.addEventListener("waiting",this.onWaiting),this.video.addEventListener("durationchange",this.onDurationChange),this.video.addEventListener("timeupdate",this.onTimeUpdate),this.video.addEventListener("play",this.onPlay),this.video.addEventListener("pause",this.onPause)}removeEventListeners(){if(this.scope.autoplayMediaQuery){window.matchMedia(this.scope.autoplayMediaQuery).removeEventListener("change",this.onMediaQueryListEvent)}this.video.removeEventListener("progress",this.onVideoProgress),this.video.removeEventListener("loadstart",this.onLoadStart),this.video.removeEventListener("canplay",this.onCanPlay),this.video.removeEventListener("canplaythrough",this.onCanPlayThrough),this.video.removeEventListener("waiting",this.onWaiting),this.video.removeEventListener("durationchange",this.onDurationChange),this.video.removeEventListener("timeupdate",this.onTimeUpdate),this.video.removeEventListener("play",this.onPlay),this.video.removeEventListener("pause",this.onPause)}_onUpdate(){this.scope.muted!==this.video.muted&&(this.scope.muted=this.video.muted),this.scope.volume!==this.video.volume&&(this.scope.volume=this.video.volume),this.scope.loop!==this.video.loop&&(this.scope.loop=this.video.loop),this.scope.controls!==this.video.controls&&(this.scope.controls=this.video.controls),this.scope.currentTime!==this.video.currentTime&&(this.scope.currentTime=this.video.currentTime),this.scope.paused!==this.video.paused&&(this.scope.paused=this.video.paused),this.scope.duration!==this.video.duration&&(this.scope.duration=this.video.duration),this.scope.readyState!==this.video.readyState&&(this.scope.readyState=this.video.readyState)}async beforeBind(){this.initVideoElement()}startAutoplay(){this.scope.autoplayOnMinBuffer?this.forceLoad():this.forceAutoplay()}forceLoad(){this.video.setAttribute("preload","auto"),this.video.load()}_forceAutoplay(){this.alreadyStartedPlaying||(this.alreadyStartedPlaying=!0,this.video.muted=!0,this.forceLoad(),this.play())}_onMediaQueryListEvent(e){e.matches?this.alreadyStartedPlaying?this.wasPaused||this.play():this.startAutoplay():(this.wasPaused=this.video.paused,this.pause())}_onVideoProgress(){if(this.debug("_onVideoProgress"),this.alreadyStartedPlaying)return;if(isNaN(this.video.duration))return void console.warn("Video duration is NaN");let e=0;for(let t=0;t<this.video.buffered.length;t++)e+=this.video.buffered.end(t)-this.video.buffered.start(t);this.scope.buffer=e/this.video.duration,this.scope.autoplayOnMinBuffer&&this.scope.buffer>this.scope.autoplayOnMinBuffer&&this.forceAutoplay()}_onLoadStart(){this.debug("_onLoadStart"),this.scope.loading=!0,this.onUpdate()}_onCanPlay(){this.debug("_onCanPlay"),this.onUpdate()}_onCanPlayThrough(){this.scope.loading=!1,this.scope.autoplayOnMinBuffer&&this.forceAutoplay(),this.onUpdate()}_onWaiting(){this.debug("_onPlay"),this.scope.loading=!0,this.onUpdate()}_onDurationChange(){this.onUpdate()}_onTimeUpdate(){this.onUpdate()}_onPlay(){this.debug("_onPlay"),this.scope.loading=!1,this.alreadyStartedPlaying=!0,this.scope.paused=!1,this.onUpdate()}_onPause(){this.scope.paused=!0,this.onUpdate()}async init(e){return super.init(e).then((e=>e))}disconnectedCallback(){super.disconnectedCallback()}template(){return null}}m(nt,"tagName","rv-video");const it={name:"contains",read(e,t,r){if(N(e))return e.indexOf(t)>-1;if(Array.isArray(e)){if(O(t)||console.warn("[containsFormatter] The second parameter must be of type number for arrays but is "+typeof t),t=Number(t),A(t))return A(r)?e[t]===r:-1!==e.indexOf(t)}else if(E(e)&&A(t))return A(r)?e[t]===r:(N(t)||console.warn("[containsFormatter] The second parameter must be of type string for objects"+typeof t),-1!==Object.keys(e).indexOf(String(t)));return!1}},st={name:"size",read:e=>e&&e.length?e.length:0},ot={name:"empty",read:e=>st.read(e)<=0},at={name:"get",read:(e,t)=>E(e)||Array.isArray(e)?e[t]:N(e)&&O(t)?e.charAt(t):null},ct={name:"first",read:e=>at.read(e,0)},lt={name:"isLast",read:(e,t)=>e.length===t+1},dt={name:"last",read:e=>at.read(e,e.length-1)},ht={name:"random",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Array.isArray(e))return e[Math.floor(Math.random()*e.length)];if(O(e)){const r=e;return Math.floor(Math.random()*(r-t+1)+t)}return null}},ut={name:"range",read:(e,t,r)=>(t=Number(O(t)?t:0),(r=Number(O(r)?r:e.length-1))>e.length-1&&(r=e.length-1),t>r?[]:e.slice(Number(t||0),1+r))},pt={name:"set",read:(e,t,r)=>(r||(r=t),E(e)||Array.isArray(e)?e[t]=r:e=r,e)},mt={name:"overlaps",read(e,t){for(const r of e)for(const e of t){if(r.equals&&r.equals(e))return!0;if(r===e)return!0}return!1}},ft={name:"join",read:(e,t)=>e.join(t)},bt={name:"and",read:(e,t)=>e&&t},vt={name:"between",read(e){return e>=(arguments.length<=1?void 0:arguments[1])&&e<=(arguments.length<=2?void 0:arguments[2])}},gt={name:"egt",read:(e,t)=>e>=t},yt={name:"eq",read:(e,t)=>e===t},wt={name:"gt",read:(e,t)=>e>t},At={name:"ne",read:(e,t)=>e!==t},Et={name:"lt",read:(e,t)=>e<t},kt={name:"elt",read:(e,t)=>e<=t},Ot={name:"or",read:(e,t)=>e||t},Nt={name:"not",read:e=>!e},Ct={name:"plus",read:(e,t)=>Number(e)+Number(t)},Dt={name:"minus",read:(e,t)=>Number(e)-Number(t)},_t={name:"times",read:(e,t)=>Number(e)*Number(t)},Pt={name:"dividedBy",read:(e,t)=>Number(e)/Number(t)},Bt={name:"modulo",read:(e,t)=>Number(e)%Number(t)},xt=(e,t)=>0===t?e:xt(t,e%t),St={name:"gcd",read:xt},Tt={name:"even",read:e=>e%2==0},jt={name:"uneven",read:e=>e%2!=0},Ft={name:"digits",read:e=>O(e)?e:C(e)},Lt={name:"args",read(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return(t,n,i,s)=>(r.push(t),r.push(n),r.push(i),r.push(s),e.apply(this,r))}},$t={name:"debug",read(e){return console[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug"](e),e}},Mt={name:"default",read:(e,t)=>A(e)?N(e)?e.length>0?e:t:null===e?t:e:t},Vt={name:"is-desktop",read:()=>re().isDesktop},Rt={name:"is-mobile",read:()=>re().isMobile},It={name:"call",read(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.apply(this,r)}},Ut={name:"call-name",read:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];return e[t](...n)}},Ht={name:"map",read(e,t,r){const n=Array.prototype.slice.call(arguments);return n.splice(1,2),t[r].apply(t,n)}},qt={name:"os",read:()=>te()},Wt={name:"prefer",read:(e,t)=>t||e},zt={name:"ternary",read:(e,t,r)=>e?t:r},Jt={name:"append",read:(e,t)=>e+t},Gt={name:"capitalize",read:e=>(e=>"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1))(e)},Yt={name:"cut",read(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?"string"!=typeof e?(console.warn("[cutFormatter] Value must be of type string"),e):e.length>t?e.substring(t,-1===t?void 0:-1)+r:e:""}},Qt={name:"downcase",read:e=>e.toLowerCase()},Xt={name:"ends-with",read:(e,t)=>"string"!=typeof e?(console.warn("[endsWithFormatter] Value must be of type string"),e):e.endsWith(t)},Kt={name:"filled",read:e=>N(e)&&!ot.read(e.replace(/\s/g,""))},Zt={name:"handleize",read:e=>e?(e=>(e=(e=>e.replace(/ä/g,"ae").replace(/ö/g,"oe").replace(/ü/g,"ue").replace(/ß/g,"ss").replace(/Ä/g,"Ae").replace(/Ö/g,"Oe").replace(/Ü/g,"Üe"))(e=(e=>e.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>{}[\]\\/]/gi,""))(e=(e=>e.replace(/\s\s+/g," "))(e=(e=e.trim()).toLowerCase())))).replace(/ /g,"-"))(e):(console.warn("[handleizeFormatter] str is not set"),"")},er={name:"match",read:(e,t,r)=>!(!e||!t)&&e.match(new RegExp(t,r))},tr={name:"padStart",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e.padStart(t,r)}},rr={name:"padEnd",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return e.padEnd(t,r)}},nr={name:"to-integer",read(e){const t=parseInt(1*e,10);return isNaN(t)?0:t}},ir={name:"to-float",read(e){const t=parseFloat(1*e);return isNaN(t)?0:t}},sr={name:"to-decimal",read(e){if(!nr.read)throw new Error("toIntegerFormatter must have a read function");if(!ir.read)throw new Error("toFloatFormatter must have a read function");const t=nr.read(1*e),r=ir.read(e);return t==r?t:r}},or={name:"is-integer",read:e=>e===+e&&e===(0|e)},ar={name:"numberFormat",read(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"'";if(!sr.read)throw new Error("toDecimalFormatter must have a read function");if(!or.read)throw new Error("isIntegerFormatter must have a read function");e=O(e)?e:sr.read(e),or.read(t)||(t=2);let i=(+(Math.round(+(Math.abs(e)+"e"+t))+"e"+-t)).toFixed(t);e<0&&(i="-"+i);const s=i.split(".");return 2==s.length?s[0].replace(/\B(?=(\d{3})+(?!\d))/g,n)+r+s[1]:s[0].replace(/\B(?=(\d{3})+(?!\d))/g,n)}},cr={name:"pluralize",read:(e,t,r)=>(null===r&&(r=t+"s"),Array.isArray(e)&&(e=e.length),1===e?t:r)},lr={name:"prepend",read:(e,t)=>t+e},dr={name:"upcase",read:e=>e.toUpperCase()},hr={name:"replace",read:(e,t,r)=>e.replace(new RegExp(t,"g"),r)},ur={name:"replaceFirst",read:(e,t,r)=>e.replace(t,r)},pr={name:"slice",read:(e,t,r)=>e.slice(t,r)},mr={name:"starts-with",read:(e,t)=>"string"!=typeof e?(console.warn("[startsWithFormatter] Value must be of type string"),e):e.startsWith(t)},fr={name:"strip",read:e=>e.trim()},br={name:"strip-html",read:e=>(e=>{const t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""})(e)},vr={name:"boolean",read:e=>"true"===e||"false"!==e&&!!e},gr={name:"is-array",read:Array.isArray},yr={name:"is-boolean",read:e=>"boolean"==typeof e},wr={name:"is-defined",read:A},Ar={name:"is-number",read:O},Er={name:"is-object",read:E},kr={name:"is-string",read:e=>N(e)},Or={name:"is-undefined",read:w},Nr={name:"parse",read:e=>N(e)?y(e):E(e)||Array.isArray(e)?(console.warn("[parseFormatter] You do not need to parse the value because since it already been parsed"),e):null},Cr={name:"to-string",read(e,t){if(Array.isArray(e))for(const t in e)e[t]&&(e[t]=k(e[t]));else if(E(e))for(const t in e)e[t]=k(e[t]);else e=k(e);return t?e||t:e}},Dr={name:"to-number",read(e,t){const r=(n=e)?parseFloat(n):void 0;var n;return t?r||t:r}},_r={formatters:a,bindersDeprecated:s,binders:i,services:t,components:o,adapters:n,init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return $.setSingleton(e),this}};class Pr extends rt{constructor(){super(),m(this,"lifecycleEvents",L.getInstance("lifecycle")),m(this,"head",{}),this.ctx=window.ssr.ctx,this.env=window.ssr.env}setHtmlHead(){this.head.title&&document&&(document.title=this.head.title)}async beforeBind(){await super.beforeBind(),this.setHtmlHead()}async afterBind(){this.setHtmlHead(),await super.afterBind()}}class Br{static get options(){return this._options}constructor(){}static getSingleton(){if(this.instance)return this.instance;throw new Error("Singleton of ModuleService not defined, please call setSingleton first!")}static setSingleton(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.instance)throw new Error("Singleton of ModuleService already defined!");return this._options=e,this.instance=new this,this.instance}}class xr{static getHeadElement(){var e;return(null===(e=document)||void 0===e?void 0:e.head)||document.getElementsByName("head")[0]}static getHtmlElement(){var e,t;return(null===(e=document)||void 0===e||null===(t=e.body)||void 0===t?void 0:t.parentNode)||document.getElementsByName("html")[0]}static createMetaTags(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"og";const r=[],n=Object.keys(e);for(const i of n){const n=Array.isArray(e[i])?e[i]:[e[i]];for(const e of n)if("object"==typeof e)r.push(...this.createMetaTags(e,`${t}:${i}`));else{const n=document.createElement("meta");"og:image"!==t&&"og:audio"!==t||"url"!==i?n.setAttribute("property",`${t}:${i}`):n.setAttribute("property",t),n.setAttribute("content",e),r.push(n)}}return r}static setMetaTags(e){const t=this.createMetaTags(e),r=this.getHeadElement();for(const e of t)r.appendChild(e)}static setNamespaces(e){const t=this.getHtmlElement();let r="";for(const t of Object.keys(e)){r&&(r+=" "),r+=`${t}: ${e[t]}`}t.setAttribute("prefix",r)}static setLocale(e){this.getHtmlElement().setAttribute("lang",e)}static set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{og:"https://ogp.me/ns#"};this.setNamespaces(t),this.setMetaTags(e),"string"==typeof e.locale&&this.setLocale(e.locale)}}const Sr={bindersDeprecated:e,services:l,formatters:c,components:d,init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Br.setSingleton(e),this}};var Tr=r(774),jr=r.n(Tr);class Fr extends Pr{static get observedAttributes(){return[]}constructor(){super(),m(this,"_debug",!0),m(this,"autobind",!0),m(this,"head",{title:"You are on home"}),m(this,"scope",{title:"Hello from ssr",content:"When you can see this, ssr works :)",obj:{foo:"bar",note:"This is an example to test the json formatter"}})}connectedCallback(){super.connectedCallback(),this.init(Fr.observedAttributes)}requiredAttributes(){return[]}async beforeBind(){await super.beforeBind()}async afterBind(){await super.afterBind()}template(){return jr()(this.scope)}}m(Fr,"tagName","index-page");var Lr=r(798),$r=r.n(Lr);class Mr extends Pr{static get observedAttributes(){return[]}constructor(){super(),m(this,"_debug",!0),m(this,"autobind",!0),m(this,"scope",{title:"{params.handle | capitalize}",content:"<p>We are {params.handle}!</a>",params:{}}),this.scope.params=this.ctx.params}connectedCallback(){super.connectedCallback(),this.init(Mr.observedAttributes)}requiredAttributes(){return[]}async beforeBind(){await super.beforeBind(),this.head.title="You are "+this.ctx.params.handle}async afterBind(){await super.afterBind()}template(){return $r()(this.scope)}}m(Mr,"tagName","pages-page");class Vr extends rt{static get observedAttributes(){return[]}constructor(){super(),m(this,"_debug",!1),m(this,"autobind",!0),m(this,"scope",{items:[{label:"Home",url:"/"},{label:"Cool",url:"/pages/cool"},{label:"Nice",url:"/pages/nice"},{label:"Different",url:"/pages/different"}]})}connectedCallback(){super.connectedCallback(),this.init(Vr.observedAttributes)}template(){return null}}function Rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rr(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}m(Vr,"tagName","link-list"),window.model=window.model||window.ssr.templateVars||{};const Ur=new Me;Ur.configure({prefix:["ssr-rv"],blockUnknownCustomElements:!1}),Ur.module.component.regists(Ir(Ir({},h),{},{LinkListComponent:Vr})),Ur.module.binder.regists(u),Ur.module.formatter.regists(p),Ur.module.regist(_r.init()),Ur.module.regist(Sr.init()),console.log("Hello from Riba"),Ur.lifecycle.events.on("ComponentLifecycle:allBound",(()=>{console.debug("ready!"),window.ssr.events.trigger("ready")}));Ur.bind(document.body,window.model).registComponents()}()}();